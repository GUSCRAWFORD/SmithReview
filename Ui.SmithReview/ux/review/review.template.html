<!--
{   
    "Id":1,
    "Name":"GitHub",
    "Icon":null,
    "AverageRating":5,
    "SampleSize":1,
    "Highest":5,
    "Lowest":5
}
-->
<div class="row marketing">
    <div ng-if="$ctrl.busy">
        <span class="fa fa-lg fa-spinner loading-spinner" aria-hidden="true"></span> Loading...
    </div>
    <div class="col-lg-12 form-horizontal" ng-form>
        <span class="fa fa-{{ $ctrl.item.Icon }}" aria-hidden="true"></span>
        <span>
            <h4>{{ $ctrl.item.Name }}</h4>
            <p>
                <span ng-show="$ctrl.editing"
                      uib-rating ng-model="$ctrl.editing.Rating"
                      max="$ctrl.constraints.maxRating"
                      aria-labelledby="default-rating"></span>

                <span ng-show="$ctrl.item&&!$ctrl.editing"
                      uib-rating ng-model="$ctrl.item.AverageRating"
                      max="$ctrl.constraints.maxRating"
                      aria-labelledby="default-rating"
                      ng-change="$ctrl.edit($ctrl.item.AverageRating)"></span>
            </p>
        </span>
    </div>
    <div ng-if="$ctrl.editing">
        <textarea ng-model="$ctrl.editing.Comment"
                  class="form-control"></textarea>
        <div class="text-right">
            <a ng-click="$ctrl.discardEdit()" class="btn btn-default">Cancel</a>
            <a ng-click="$ctrl.saveEdit()" class="btn btn-primary">Save</a>
        </div>
    </div>
    <hr>
   <!--
       
{"Id":2,"Rating":5,"Comment":"Awesome!"}   
    -->
    <div ng-if="!$ctrl.busy"
         class="col-lg-6"
         ng-repeat="review in $ctrl.reviews">
        <span>{{ review.Comment }}</span>
        <p>
            <span uib-rating ng-model="review.Rating"
                  max="$ctrl.constraints.maxRating"
                  readonly="true"
                  aria-labelledby="default-rating"></span>
        </p>
    </div>
</div>